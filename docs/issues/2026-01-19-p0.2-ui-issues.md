# P0.2 UI Templates - Issues Found During Manual Testing

**Date:** 2026-01-19
**Tester:** Manual E2E testing after P0.2 implementation
**Branch:** feature/p0.2-ui-templates

---

## Issue 1: Signout - Method Not Allowed

**Status:** Open
**Severity:** High (blocks user from logging out)

**Steps to reproduce:**
1. Log in to the application
2. Click "Sign Out" in the user menu dropdown

**Expected:** User is logged out and redirected to login page
**Actual:** "Method Not Allowed" error

**Root cause:**
- `user_menu.html` template uses POST method: `<form action="/logout" method="POST">`
- But `views/auth.py:89` defines a GET endpoint: `@router.get("/logout")`
- The API route in `auth/routes.py:64` correctly uses `@router.post("/logout")`

**Fix:** Change `views/auth.py` from `@router.get("/logout")` to `@router.post("/logout")`

---

## Issue 2: Preferences - Not Found

**Status:** Open
**Severity:** Medium

**Steps to reproduce:**
1. Log in to the application
2. Click "Preferences" link in user menu dropdown

**Expected:** Preferences page loads
**Actual:** 404 Not Found error

**Root cause:**
- `user_menu.html:57` links to `/preferences`
- No route exists for `/preferences`

**Fix options:**
1. Redirect `/preferences` to `/profile` (preferences are on profile page)
2. Create separate preferences page
3. Update link to point to `/profile` directly

---

## Issue 3: Sidebar Links Not Working

**Status:** Open
**Severity:** High (navigation broken)

**Steps to reproduce:**
1. Log in to the application
2. Click any link in the sidebar

**Expected:** Page loads for the clicked item
**Actual:** 404 Not Found error for all sidebar links

**Root cause:**
The sidebar template uses incorrect URLs that don't match the actual routes:

| Sidebar Link | Points To | Actual Route | Status |
|-------------|-----------|--------------|--------|
| Dashboard | `/dashboard` | N/A | Not implemented |
| Projects | `/projects` | N/A | Not implemented |
| Tasks | `/tasks` | N/A | Not implemented |
| Calendar | `/calendar` | N/A | Not implemented |
| Team Members | `/team` | N/A | Not implemented |
| Messages | `/messages` | N/A | Not implemented |
| Users (Admin) | `/admin/users` | `/users` | Wrong URL |
| Roles (Admin) | `/admin/roles` | `/roles` | Wrong URL |
| Settings (Admin) | `/admin/settings` | N/A | Not implemented |

**Fix:**
1. Update admin links from `/admin/*` to match actual routes (`/users`, `/roles`)
2. Create placeholder pages or "Coming Soon" routes for unimplemented features
3. Or hide links to unimplemented features

---

## Issue 4: Dark Mode Button Styling

**Status:** Open
**Severity:** Low (cosmetic)

**Steps to reproduce:**
1. Log in to the application
2. Switch theme to Dark mode
3. Navigate to Users page
4. Observe "Create User" button

**Expected:** Button has readable text with appropriate contrast
**Actual:** Blue text on blue button background - poor contrast/readability

**Root cause:**
In `dark.css:24`:
```css
--color-white: #0f172a;  /* Dark color for inversion */
```

But `.btn--primary` in `components.css:57-60` uses:
```css
.btn--primary {
    background-color: var(--color-primary);  /* #3b82f6 - blue */
    color: var(--color-white);  /* In dark mode: #0f172a - dark! */
}
```

So in dark mode, primary buttons get blue background with dark text - poor contrast.

**Fix:** Add dark mode override for `.btn--primary` to use actual white for text:
```css
[data-theme="dark"] .btn--primary {
    color: #ffffff;
}
```

---

## Issue 5: Post-Login Redirect Should Go to Dashboard

**Status:** Open (Needs Discussion)
**Severity:** Medium (UX improvement)

**Current behavior:**
- After login, user is redirected to `/users` (in `views/auth.py:85`)

**Desired behavior:**
- After login, user should be redirected to Dashboard

**Questions to discuss:**
1. What content should Dashboard show for different roles?
2. Should different users see different dashboards?
3. Since Dashboard isn't implemented yet, should we:
   - Redirect to `/profile` temporarily?
   - Create a simple Dashboard placeholder?
   - Keep redirecting to `/users` until Dashboard is built?

**Action required:** Discussion with stakeholder before implementation

---

## Summary

| # | Issue | Severity | Root Cause | Fix Complexity |
|---|-------|----------|------------|----------------|
| 1 | Signout - Method Not Allowed | High | GET vs POST mismatch | Simple (1 line) |
| 2 | Preferences - Not Found | Medium | Missing route | Simple (redirect or link fix) |
| 3 | Sidebar Links Not Working | High | Wrong URLs + missing pages | Medium |
| 4 | Dark Mode Button Styling | Low | CSS variable issue | Simple (add override) |
| 5 | Post-Login Redirect | Medium | UX decision | Needs discussion |

---

## Files to Modify

- `src/groundwork/views/auth.py` - Fix logout method, login redirect
- `src/groundwork/templates/components/sidebar.html` - Fix admin links
- `src/groundwork/templates/components/user_menu.html` - Fix preferences link
- `src/groundwork/static/css/themes/dark.css` - Fix button text color
