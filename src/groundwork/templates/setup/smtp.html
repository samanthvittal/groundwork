{% extends "layouts/public.html" %}

{% block title %}Email Configuration - Setup{% endblock %}

{% block card_header %}
<div class="setup-progress">
  <span class="step completed">&#10003;</span>
  <span class="step completed">&#10003;</span>
  <span class="step completed">&#10003;</span>
  <span class="step active">4</span>
</div>

<h1 class="public-layout__title">Email Configuration</h1>
<p class="public-layout__subtitle">
  Configure SMTP to enable password reset emails.
  <span class="badge badge-info">Optional</span>
</p>
{% endblock %}

{% block content %}
<form method="post" action="/setup/smtp" class="form">
  <div class="form-row">
    <div class="form-group flex-2">
      <label for="smtp_host">SMTP Host</label>
      <input
        type="text"
        id="smtp_host"
        name="smtp_host"
        placeholder="smtp.example.com"
        value="{{ smtp_host or '' }}"
      >
    </div>

    <div class="form-group flex-1">
      <label for="smtp_port">Port</label>
      <input
        type="number"
        id="smtp_port"
        name="smtp_port"
        placeholder="587"
        value="{{ smtp_port or '587' }}"
      >
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="smtp_username">Username</label>
      <input
        type="text"
        id="smtp_username"
        name="smtp_username"
        placeholder="username"
        value="{{ smtp_username or '' }}"
      >
    </div>

    <div class="form-group">
      <label for="smtp_password">Password</label>
      <input
        type="password"
        id="smtp_password"
        name="smtp_password"
        placeholder="password"
      >
    </div>
  </div>

  <div class="form-group">
    <label for="smtp_from_address">From Address</label>
    <input
      type="email"
      id="smtp_from_address"
      name="smtp_from_address"
      placeholder="noreply@example.com"
      value="{{ smtp_from_address or '' }}"
    >
  </div>

  {% if error %}
  <div class="alert alert-error">{{ error }}</div>
  {% endif %}

  {% if success %}
  <div class="alert alert-success">{{ success }}</div>
  {% endif %}

  <div class="form-actions">
    <a href="/setup/admin" class="btn btn-ghost">Back</a>
    <div class="btn-group">
      <a href="/setup/complete" class="btn btn-secondary">Skip for Now</a>
      <button type="submit" class="btn btn-primary">Save & Complete</button>
    </div>
  </div>
</form>
{% endblock %}
