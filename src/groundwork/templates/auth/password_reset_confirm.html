{% extends "layouts/public.html" %}

{% block title %}Set New Password{% endblock %}

{% block content %}
<div class="auth-card">
  {% if success %}
  <div class="text-center">
    <div class="success-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-success">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
        <polyline points="22 4 12 14.01 9 11.01"/>
      </svg>
    </div>
    <h1>Password Updated!</h1>
    <p class="text-secondary">Your password has been successfully reset.</p>
    <a href="/login" class="btn btn-primary btn-lg">Go to Login</a>
  </div>
  {% elif invalid_token %}
  <div class="text-center">
    <div class="error-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-error">
        <circle cx="12" cy="12" r="10"/>
        <line x1="15" y1="9" x2="9" y2="15"/>
        <line x1="9" y1="9" x2="15" y2="15"/>
      </svg>
    </div>
    <h1>Invalid or Expired Link</h1>
    <p class="text-secondary">This password reset link is invalid or has expired.</p>
    <a href="/forgot-password" class="btn btn-primary">Request New Link</a>
  </div>
  {% else %}
  <h1>Set New Password</h1>
  <p class="text-secondary">Enter your new password below.</p>

  {% if error %}
  <div class="alert alert-error">{{ error }}</div>
  {% endif %}

  <form method="post" action="/reset-password/{{ token }}" class="form">
    <div class="form-group">
      <label for="password">New Password</label>
      <div class="input-group">
        <span class="input-icon">ğŸ”’</span>
        <input
          type="password"
          id="password"
          name="password"
          placeholder="Minimum 8 characters"
          minlength="8"
          required
          autofocus
        >
        <button type="button" class="input-action" data-password-toggle>ğŸ‘ï¸</button>
      </div>
    </div>

    <div class="form-group">
      <label for="password_confirm">Confirm Password</label>
      <div class="input-group">
        <span class="input-icon">ğŸ”’</span>
        <input
          type="password"
          id="password_confirm"
          name="password_confirm"
          placeholder="Confirm your password"
          minlength="8"
          required
        >
        <button type="button" class="input-action" data-password-toggle>ğŸ‘ï¸</button>
      </div>
    </div>

    <button type="submit" class="btn btn-primary btn-lg w-full">
      Reset Password
    </button>
  </form>
  {% endif %}
</div>
{% endblock %}
