# P0.2 UI Templates - Design Document

> **Status**: Approved
> **Created**: 2026-01-19
> **Depends On**: P0.2 Authentication (API routes, CSS structure, base templates)

---

## Overview

Complete the P0.2 Authentication & User Management phase by building all HTML templates and view routes. This enables end-to-end testing of the setup wizard, login, user management, and profile features.

---

## Design System

### Typography

- **Primary Font:** JetBrains Mono (Google Fonts CDN)
- **Fallback:** `ui-monospace, SFMono-Regular, Monaco, Consolas, monospace`
- **Scale:** 12px (small), 14px (body), 16px (large), 20px (h3), 24px (h2), 32px (h1)

### Color Palette

**Light Theme:**
| Purpose | Color |
|---------|-------|
| Page background | `#fafafa` |
| Card background | `#ffffff` |
| Primary text | `#1a1a1a` |
| Secondary text | `#6b7280` |
| Primary accent | `#2563eb` (blue-600) |
| Success | `#16a34a` |
| Warning | `#ca8a04` |
| Error | `#dc2626` |
| Borders | `#e5e7eb` |

**Dark Theme:**
| Purpose | Color |
|---------|-------|
| Page background | `#0f0f0f` |
| Card background | `#1a1a1a` |
| Primary text | `#f5f5f5` |
| Secondary text | `#9ca3af` |
| Primary accent | `#3b82f6` (blue-500) |
| Borders | `#2d2d2d` |

### Spacing & Layout

- **Spacing scale:** 4px base (4, 8, 12, 16, 24, 32, 48, 64)
- **Max content width:** 1200px (app), 480px (auth/setup forms)
- **Card styling:** Subtle shadow (`0 1px 3px rgba(0,0,0,0.1)`), 8px radius, 24px padding
- **Input height:** 44px
- **Border radius:** 8px (cards, inputs), 4px (buttons), full (badges)

---

## Page Layouts

### Public Layout (login, setup, password reset)

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│              ┌─────────────────────┐                    │
│              │      Logo           │                    │
│              │    "Groundwork"     │                    │
│              ├─────────────────────┤                    │
│              │   Form Content      │                    │
│              │   (max 480px)       │                    │
│              └─────────────────────┘                    │
│              Footer: © 2026 • v1.0                      │
└─────────────────────────────────────────────────────────┘
```

- Vertically centered card
- Logo above form, footer below

### App Layout (authenticated pages)

```
┌─────────────────────────────────────────────────────────┐
│ TopBar: Logo + Instance Name              User Menu ▼   │
├────────────┬────────────────────────────────────────────┤
│  Sidebar   │         Main Content Area                  │
│  (240px)   │         (max 1200px, centered)             │
│            │                                            │
│  • Users   │        Page Title + Breadcrumbs            │
│  • Roles   │        ────────────────────────            │
│            │        Content...                          │
├────────────┴────────────────────────────────────────────┤
│ Footer: © 2026 Groundwork • Version 1.0.0               │
└─────────────────────────────────────────────────────────┘
```

- Fixed TopBar (56px)
- Collapsible Sidebar (240px → 64px icons on mobile)
- Main content scrolls independently

---

## Components

### Buttons

| Variant | Style |
|---------|-------|
| Primary | Blue background, white text |
| Secondary | White/transparent, border |
| Danger | Red for destructive actions |
| Ghost | Text-only, subtle hover |
| Sizes | sm (32px), md (40px), lg (48px) |

### Form Elements

- **Inputs:** Full-width, 44px height, 8px radius, 2px blue focus ring
- **Labels:** Above input, semibold
- **Help text:** Small, muted, below input
- **Error state:** Red border, red help text
- **Input groups:** Icon prefix/suffix support

### Cards

- White background, subtle shadow, 8px radius, 24px padding
- Optional header/body/footer sections
- Clickable variant with hover lift

### Tables

- Header with muted background
- Alternating row colors
- Action buttons right-aligned
- Empty state with illustration

### Alerts & Toasts

- 4 variants: info, success, warning, error
- Icon + message + dismiss button
- **Toasts:** Fixed bottom-right corner, auto-dismiss (5s), stack upward

### Badges

- Status: Active (green), Inactive (gray), Admin (purple), System (blue)
- Small, rounded-full, uppercase

### Modal

- Centered overlay with backdrop blur
- Header + close button, body, footer with actions
- Escape key and backdrop click to close

---

## Pages

### Setup Wizard

**Flow:** Welcome → Instance → Admin → SMTP → Complete

**1. Welcome (`/setup`)**
- "Welcome to Groundwork" heading
- Brief intro text
- "Get Started →" button
- Progress: Step 1 of 4

**2. Instance Settings (`/setup/instance`)**
- Progress: Step 2 of 4
- Fields: Instance Name, Base URL (auto-detected)
- "Continue →" / "← Back"

**3. Admin Account (`/setup/admin`)**
- Progress: Step 3 of 4
- Fields: Email, First Name, Last Name, Password, Confirm Password
- Password strength indicator
- "Continue →" / "← Back"

**4. SMTP Configuration (`/setup/smtp`)**
- Progress: Step 4 of 4
- "Optional" badge
- Fields: Host, Port, Username, Password, From Address
- "Test Connection" button
- "Complete Setup" / "Skip for Now" / "← Back"

**5. Complete (`/setup/complete`)**
- Success checkmark
- "Groundwork is ready!"
- Summary of configuration
- "Go to Login →"

### Auth Pages

**1. Login (`/login`)**
- Email + Password fields
- "Sign In" button
- "Forgot password?" link (hidden if SMTP not configured)
- Error banner for invalid credentials

**2. Password Reset Request (`/forgot-password`)**
- Email field
- "Send Reset Link" button
- "← Back to Login"
- Success: "Check your email" message

**3. Password Reset Confirm (`/reset-password/{token}`)**
- New Password + Confirm fields
- Strength indicator
- "Reset Password" button
- Success: "Password updated!" + "Go to Login →"
- Error: Invalid/expired token message

### Profile Pages

**1. View Profile (`/profile`)**
- Two-column: Avatar (left), Details card (right)
- Email, name, role, member since
- "Edit Profile" button

**2. Edit Profile (`/profile/edit`)**
- Avatar upload with drag-drop
- First Name, Last Name, Display Name fields
- "Save Changes" / "Cancel"

**3. Settings (`/profile/settings`)**
- Password section: Change password inline form
- Preferences: Timezone, Language, Theme toggle
- Auto-save with "Saved" indicator

### User Management (Admin)

**1. User List (`/users`)**
- "Add User" button
- Filters: Search, Role, Status
- Table: Avatar+Name, Email, Role, Status, Last Login, Actions
- Pagination

**2. User Detail (`/users/{id}`)**
- Avatar + status + quick actions (left)
- Tabbed content: Details, Activity (right)
- "Edit User" button

**3. Create/Edit User (`/users/new`, `/users/{id}/edit`)**
- Email, First Name, Last Name, Display Name, Role, Status
- New user: Shows generated temp password
- "Create User" / "Save Changes"

### Role Management (Admin)

**1. Role List (`/roles`)**
- "Create Role" button
- Card layout per role
- Shows: Name, description, user count, permission count
- System badge for built-in roles

**2. Role Detail (`/roles/{id}`)**
- Permissions card (grouped checklist)
- Users card (list with links)
- "Edit Role" button

**3. Create/Edit Role (`/roles/new`, `/roles/{id}/edit`)**
- Name, Description
- Permission checkbox grid (grouped by category)
- System role notice if applicable

---

## Navigation

### TopBar
- Left: Logo → home, Instance name
- Right: Theme toggle, User menu dropdown

### User Menu
- Avatar + Name + Email
- My Profile → `/profile`
- Settings → `/profile/settings`
- Sign Out → logout

### Sidebar
```
TEAM
  ├─ Users        (requires users:read)
  └─ Roles        (requires roles:manage)

ADMIN
  └─ Settings     (requires settings:manage) [placeholder]
```

- Links shown based on permissions
- Current page highlighted
- Collapse to icons on mobile

### Breadcrumbs
- Users → User Detail → Edit User
- Roles → Role Detail → Edit Role

---

## View Routes

### Public (no auth)

| Route | Template |
|-------|----------|
| `GET /setup` | `setup/welcome.html` |
| `GET /setup/instance` | `setup/instance.html` |
| `GET /setup/admin` | `setup/admin.html` |
| `GET /setup/smtp` | `setup/smtp.html` |
| `GET /setup/complete` | `setup/complete.html` |
| `GET /login` | `auth/login.html` |
| `GET /forgot-password` | `auth/password_reset.html` |
| `GET /reset-password/{token}` | `auth/password_reset_confirm.html` |

### Protected (auth required)

| Route | Template | Permission |
|-------|----------|------------|
| `GET /profile` | `profile/view.html` | any |
| `GET /profile/edit` | `profile/edit.html` | any |
| `GET /profile/settings` | `profile/settings.html` | any |
| `GET /users` | `users/list.html` | users:read |
| `GET /users/new` | `users/create.html` | users:create |
| `GET /users/{id}` | `users/detail.html` | users:read |
| `GET /users/{id}/edit` | `users/edit.html` | users:update |
| `GET /roles` | `roles/list.html` | roles:manage |
| `GET /roles/new` | `roles/create.html` | roles:manage |
| `GET /roles/{id}` | `roles/detail.html` | roles:manage |
| `GET /roles/{id}/edit` | `roles/edit.html` | roles:manage |

### HTMX Partials

| Route | Returns |
|-------|---------|
| `GET /partials/users/row/{id}` | Single user row |
| `GET /partials/toast` | Toast message |

---

## Files to Create

### Templates
```
templates/
├── auth/
│   ├── login.html
│   ├── password_reset.html
│   └── password_reset_confirm.html
├── setup/
│   ├── welcome.html
│   ├── instance.html
│   ├── admin.html
│   ├── smtp.html
│   └── complete.html
├── users/
│   ├── list.html
│   ├── detail.html
│   ├── create.html
│   └── edit.html
├── roles/
│   ├── list.html
│   ├── detail.html
│   ├── create.html
│   └── edit.html
├── profile/
│   ├── view.html
│   ├── edit.html
│   └── settings.html
└── partials/
    ├── user_row.html
    └── toast.html
```

### Static Assets
```
static/
├── css/
│   └── (update base.css with JetBrains Mono)
├── js/
│   └── app.js
└── images/
    └── logo.svg
```

### View Routes
```
src/groundwork/
├── views/
│   ├── __init__.py
│   ├── auth.py
│   ├── setup.py
│   ├── users.py
│   ├── roles.py
│   ├── profile.py
│   └── partials.py
```

---

## Deliverables

- [ ] Update CSS with JetBrains Mono font
- [ ] Create logo.svg and app.js
- [ ] Setup wizard templates (5 pages)
- [ ] Auth templates (3 pages)
- [ ] Profile templates (3 pages)
- [ ] User management templates (4 pages)
- [ ] Role management templates (4 pages)
- [ ] Partial templates (2)
- [ ] View routes module with all HTML endpoints
- [ ] Integration with existing API routes via HTMX
- [ ] End-to-end manual testing
